---
import Layout from '@/layouts/Layout.astro';
import ContactForm from '@/components/contact/ContactForm.astro';
import { MapPin, Phone, Mail, ArrowRight } from 'lucide-react';

// 静态配置：联系信息
const contactInfo = [
  {
    icon: MapPin,
    title: 'Global Headquarters',
    lines: [
      '3rd&5th Floor, Building 7,',
      'Xinhua Industrial Building, Nanshan,',
      'Shenzhen, Guangdong, China',
    ],
  },
  {
    icon: Phone,
    title: 'Call Us',
    lines: ['(86)-0755-26888079', 'Mon-Fri, 9am - 6pm (CST)'],
  },
  {
    icon: Mail,
    title: 'Email Support',
    lines: ['info@cndlive.com', 'support@cndlive.com'],
  },
];
---

<Layout title="Contact Us | CNDLive">
  {
    /* 1. 使用 bg-surface-base 和 text-text-main
      不需要写 dark:bg-xxx，因为 CSS 变量会自动切换值 
  */
  }
  <main
    class="bg-surface-base text-text-main relative min-h-screen overflow-hidden transition-colors duration-300"
  >
    {/* ✨ 背景氛围灯光 */}
    {/* 使用 bg-primary (你在 CSS 里定义了它在深浅模式下的红色值) */}
    <div
      class="bg-primary/10 pointer-events-none absolute top-0 left-1/2 -z-10 h-[600px] w-[1000px] -translate-x-1/2 rounded-full blur-[100px]"
    >
    </div>

    <div class="container mx-auto   px-4 pt-32 pb-20">
      <div class="grid grid-cols-1 items-start gap-16 lg:grid-cols-2">
        {/* === 左侧：标题 + 信息卡片 === */}
        <div
          class="animate-in fade-in slide-in-from-left-8 space-y-12 duration-700"
        >
          {/* 标题区 */}
          <div>
            <h1
              class="text-text-main mb-6 text-3xl leading-tight font-black tracking-tight uppercase md:text-6xl"
            >
              contact <span class="text-primary"> us </span>
            </h1>
            <p class="text-text-muted max-w-md text-xl leading-relaxed">
              Whether you have a technical question or need a custom solution,
              our team is ready to help.
            </p>
          </div>

          {/* 信息卡片列表 */}
          <div class="grid gap-6">
            {
              contactInfo.map((item) => (
                <div class="group border-surface-border bg-surface-card hover:border-primary/30 hover:bg-surface-hover flex items-start gap-6 rounded-2xl border p-6 shadow-sm transition-all duration-300 hover:shadow-md">
                  {/* 图标容器：
                    bg-surface-muted -> 自动变深灰/浅灰
                    text-text-muted -> 自动变灰
                    group-hover -> 激活品牌色 
                */}
                  <div class="bg-surface-muted text-text-muted group-hover:bg-primary flex h-12 w-12 shrink-0 items-center justify-center rounded-xl transition-colors duration-300 group-hover:text-white">
                    <item.icon className="h-5 w-5" />
                  </div>

                  {/* 文字内容 */}
                  <div>
                    <h3 class="text-text-main mb-2 text-lg font-bold">
                      {item.title}
                    </h3>
                    <div class="text-text-muted space-y-1 text-sm">
                      {item.lines.map((line) => (
                        <p>{line}</p>
                      ))}
                    </div>
                  </div>
                </div>
              ))
            }
          </div>
        </div>

        {/* === 右侧：表单区域 === */}
        <div
          class="animate-in fade-in slide-in-from-right-8 delay-100 duration-700 lg:sticky lg:top-32"
        >
          {/* 边框渐变：从 border 颜色到透明 */}
          <div
            class="from-surface-border relative rounded-3xl bg-gradient-to-b to-transparent p-[1px] shadow-2xl shadow-black/5"
          >
            {/* 内部卡片背景：bg-surface-card (自动切换纯白/深灰) */}
            <div
              class="bg-surface-card relative overflow-hidden rounded-[23px] p-8 md:p-10"
            >
              {/* 内部装饰光点 */}
              <div
                class="bg-primary/10 pointer-events-none absolute -top-20 -right-20 h-60 w-60 rounded-full blur-[60px]"
              >
              </div>

              <div class="relative z-10">
                <h3
                  class="text-text-main mb-6 flex items-center gap-2 text-2xl font-bold"
                >
                  Send us a message
                  <ArrowRight className="text-primary h-5 w-5" />
                </h3>
                <ContactForm />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    {/* === 底部：全宽地图 === */}
    <section class="border-surface-border relative h-[500px] w-full border-t">
      {
        /* 地图 iframe 本身没有语义化变量可用，所以这里保留 dark: 语法来处理滤镜 
          (inverted map 在深色模式下看起来更酷)
      */
      }
      <iframe
        src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3692.579576640236!2d113.91461731157742!3d22.25601197963891!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3403fc0423722a29%3A0x1e02900000000000!2sShenzhen!5e0!3m2!1sen!2scn!4v1620000000000!5m2!1sen!2scn"
        width="100%"
        height="100%"
        style="border:0;"
        allowfullscreen=""
        loading="lazy"
        referrerpolicy="no-referrer-when-downgrade"
        class="h-full w-full opacity-80 contrast-[0.9] grayscale transition-all duration-500 hover:opacity-100 dark:contrast-[0.83] dark:grayscale dark:invert"
      >
      </iframe>

      {/* 顶部融合遮罩：关键！使用 from-surface-base 确保完美融合页面背景 */}
      <div
        class="from-surface-base pointer-events-none absolute top-0 left-0 h-32 w-full bg-gradient-to-b to-transparent"
      >
      </div>

      {/* 品牌色覆盖层 */}
      <div
        class="bg-primary/5 pointer-events-none absolute inset-0 mix-blend-multiply dark:mix-blend-overlay"
      >
      </div>
    </section>
  </main>
</Layout>

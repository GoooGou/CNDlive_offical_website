---
import ContentLayout from '@/layouts/ContentLayout.astro';
import UniversalCard from './UniversalCard.astro'; // ç«–å‘å¤§å¡ç‰‡
import UniversalRow from './UniversalRow.astro';   // æ¨ªå‘å°å¡ç‰‡

interface Props {
  posts: any[];       // æ–‡ç« æ•°æ®æ•°ç»„
  basePath: string;   // è·³è½¬è·¯å¾„å‰ç¼€ (å¦‚ /news)
  layout?: 'featured' | 'grid'; // ğŸ”¥ æ ¸å¿ƒæ§åˆ¶å¼€å…³
}

const { posts, basePath, layout = 'grid' } = Astro.props;

// å¦‚æœæ˜¯ featured æ¨¡å¼ï¼Œæˆ‘ä»¬éœ€è¦æ‹†åˆ†æ•°æ®
const featuredPost = layout === 'featured' ? posts[0] : null;
const sidePosts = layout === 'featured' ? posts.slice(1, 3) : [];
---


{layout === 'featured' && (
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-10">
    
    {/* å·¦ä¾§å¤§å›¾ */}
    {featuredPost && (
      <UniversalCard post={featuredPost} basePath={basePath} />
    )}

    {/* å³ä¾§åˆ—è¡¨ */}
    <div class="flex flex-col gap-8 justify-between">
      {sidePosts.map(post => (
        <div class="flex-1">
          <UniversalRow post={post} basePath={basePath} />
        </div>
      ))}
    </div>

  </div>
)}

{/* =========================================
    æ¨¡å¼ B: Grid å¸ƒå±€ (3åˆ—ç½‘æ ¼)
    é€‚ç”¨äºï¼šåˆ—è¡¨é¡µã€æ›´å¤šæ¨è
   ========================================= */}
{layout === 'grid' && (
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 row-gap-12">
    {posts.map(post => (
      <UniversalCard post={post} basePath={basePath} />
    ))}
  </div>
)}
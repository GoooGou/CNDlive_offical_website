---
// src/components/ui/Cover.astro
import IMG from './IMG.astro';

interface Props {
  src?: any;
  alt: string;
  title?: string;
  className?: string;
  raw?: boolean;
  loading?: 'eager' | 'lazy';
}

const {
  src,
  alt,
  title = 'CNDLive',
  className = '',
  raw = false,
  loading = 'lazy',
} = Astro.props;
---

<div
  class={`
  relative w-full h-full overflow-hidden 
  bg-zinc-100 dark:bg-zinc-900
  ${className}
`}
>
  {
    /* 核心修改：
    直接使用 IMG 组件。
    1. 所有的图片处理逻辑（原生vs压缩）都由 IMG 接管。
    2. 所有的无图兜底逻辑（渐变、噪点、首字母）都由 IMG 接管。
    3. Cover 组件只需要关注“样式表现” (CSS)。
  */
  }
  <IMG
    src={src}
    alt={alt}
    title={title}
    raw={raw}
    loading={loading}
    class="h-full w-full object-cover transition-transform duration-700 group-hover:scale-105"
  />

  {/* ✨ 统一内边框 (Overlay Ring) */}
  {
    /* 保留这个覆盖层，因为它是 Cover 组件特有的装饰，覆盖在图片或兜底背景之上 */
  }
  <div
    class="pointer-events-none absolute inset-0 rounded-[inherit] ring-1 ring-black/5 ring-inset dark:ring-white/10"
  >
  </div>
</div>

---
import ContentLayout from '@/layouts/ContentLayout.astro';
import PostGrid from '@/components/common/PostGrid.astro';
import { generateItemListSchema } from '@/utils/seo';

interface Props {
  title: string; // 页面标题 "Newsroom"
  subtitle?: string; // 副标题
  posts: any[]; // 文章数据
  basePath: string; // 基础路径 "/news"
}

const { title, subtitle, posts, basePath } = Astro.props;

// 生成列表结构化数据
const listSchema = generateItemListSchema(
  title,
  posts,
  basePath,
  Astro.site || new URL('https://cndlive.com')
);
---

<ContentLayout
  title={title}
  breadcrumbItems={[{ label: title }]}
  backHref="/"
  schema={listSchema}
  backLabel="Back to Home"
>
  {
    /* 2. 头部：标题区域 
      [修改]: border-zinc-800 -> border-surface-border (适配边框颜色)
      [添加]: transition-colors (平滑过渡)
  */
  }
  <div
    class="border-surface-border mb-16 border-b pb-8 transition-colors duration-300"
  >
    {
      /* [修改]: 移除了原先的 bg-gradient (它在亮色模式下看不见)
      改为 text-text-main (亮色黑字，深色白字)
    */
    }
    <h1 class="text-text-main mb-4 text-5xl font-bold tracking-tight">
      {title}
    </h1>

    {
      /* [修改]: text-zinc-400 -> text-text-muted (适配副标题颜色)
       */
    }
    {subtitle && <p class="text-text-muted max-w-2xl text-lg">{subtitle}</p>}
  </div>

  {/* 3. 内容：使用 PostGrid 展示列表 */}
  <PostGrid posts={posts} basePath={basePath} layout="grid" />
</ContentLayout>

---
import Cover from './Cover.astro';

interface Props {
  post: any;
  basePath: string;
}

const { post, basePath } = Astro.props;

// 构建跳转链接
// ⚠️ 注意：如果你的文章文件是 .md 或 .mdx，通常使用 post.slug 而不是 post.id
const href = `${basePath}/${post.slug || post.id}`;
---

<a href={href} class="group flex h-full flex-col gap-4">
  {/* 图片区域 - 由 Cover 组件完全接管（含图片、大字报兜底、边框） */}
  <div
    class="border-surface-border relative aspect-video shrink-0 overflow-hidden rounded-xl border transition-colors duration-300"
  >
    <Cover
      src={post.data.cover}
      alt={post.data.title}
      title={post.data.title}
      loading="lazy"
    />
  </div>

  {/* 文字区域 */}
  <div class="flex flex-1 flex-col space-y-2">
    {/* 标题 */}
    <h3
      class="text-text-main group-hover:text-primary line-clamp-2 text-xl font-bold transition-colors"
    >
      {post.data.title}
    </h3>

    {/* 描述 */}
    <p
      class="text-text-muted line-clamp-2 text-sm transition-colors duration-300"
    >
      {post.data.description}
    </p>
  </div>
</a>

---
// src/layouts/ProductLayout.astro
import ContentLayout from '@/layouts/ContentLayout.astro';
import ProductTabs from '@/components/products/ProductTabs.astro'; 

interface Props {
  post: any;
  basePath: string;
  parentTitle: string;
  activeTabId: 'overview' | 'tech-specs' | 'download'; // ğŸ”¥ æ¥æ”¶å½“å‰é¡µé¢æ ‡è¯†
}

const { post, basePath, parentTitle, activeTabId } = Astro.props;

// åŠ¨æ€ç”Ÿæˆ URL
// å‡è®¾ä½ çš„äº§å“è·¯å¾„æ˜¯ /products/[slug]/...
const baseUrl = `${basePath}/${post.id}`; // æ¯”å¦‚ /products/product-1

const tabItems = [
  { id: 'overview', label: 'Overview', href: baseUrl },
  { id: 'tech-specs', label: 'Tech Specs', href: `${baseUrl}/specs` },
  { id: 'download', label: 'Download', href: `${baseUrl}/downloads` }
];

// å¦‚æœæœ‰ä¸‹è½½èµ„æºï¼Œæ‰æ˜¾ç¤º Download é“¾æ¥
if (post.data.downloadUrl || post.data.manualPdf) {
  tabItems.push({ id: 'download', label: 'Download', href: `${baseUrl}/downloads` });
}
---

<ContentLayout
  title={post.data.title}
  breadcrumbItems={[
    { label: parentTitle, href: basePath },
    { label: post.data.title }
  ]}
  backHref={basePath}
  backLabel={`Back to ${parentTitle}`}
>
 {/* 2. Tab å¯¼èˆª (ä¼ å…¥ activeId) */}
    <ProductTabs items={tabItems} activeId={activeTabId} />
  <div class="max-w-5xl mx-auto w-full relative min-h-[60vh]">
    
    {/* 1. å…¬å…±å¤´éƒ¨ */}
    <header class="mb-8 text-center pt-8">
        <h1 class="text-3xl md:text-5xl font-bold mb-4 text-white leading-tight">
            {post.data.title}
        </h1>
        {post.data.description && (
          <p class="text-xl text-zinc-400 max-w-2xl mx-auto">{post.data.description}</p>
        )}
    </header>


    {/* 3. ä¸åŒçš„é¡µé¢å†…å®¹åœ¨è¿™é‡Œæ¸²æŸ“ */}
    <article class="w-full mt-8 animate-in fade-in duration-500">
      <slot />
    </article>

  </div>
</ContentLayout>
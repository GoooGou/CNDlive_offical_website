---
// src/components/mdx/Callout.astro
import {
  Info,
  AlertTriangle,
  CheckCircle,
  XCircle,
  Lightbulb,
} from 'lucide-react';

interface Props {
  type?: 'info' | 'warning' | 'success' | 'error' | 'tip';
  title?: string;
}

const { type = 'info', title } = Astro.props;

// ğŸ¨ 1. é¢œè‰²é…ç½®ï¼šåªå®šä¹‰ "å›¾æ ‡é¢œè‰²" å’Œ "å·¦è¾¹æ¡†é¢œè‰²"
// ä¸å†å®šä¹‰èƒŒæ™¯è‰²ï¼ŒèƒŒæ™¯ç»Ÿä¸€ç”¨ç™½/é»‘ï¼Œç¡®ä¿æ–‡å­—ç»å¯¹æ¸…æ™°
const styles = {
  info: {
    base: 'border-l-blue-500',
    icon: 'text-blue-600 dark:text-blue-400',
    IconComponent: Info,
  },
  warning: {
    base: 'border-l-amber-500',
    icon: 'text-amber-600 dark:text-amber-400',
    IconComponent: AlertTriangle,
  },
  success: {
    base: 'border-l-emerald-500',
    icon: 'text-emerald-600 dark:text-emerald-400',
    IconComponent: CheckCircle,
  },
  error: {
    base: 'border-l-red-500',
    icon: 'text-red-600 dark:text-red-400',
    IconComponent: XCircle,
  },
  tip: {
    base: 'border-l-purple-500',
    icon: 'text-purple-600 dark:text-purple-400',
    IconComponent: Lightbulb,
  },
};

const current = styles[type];
const Icon = current.IconComponent;
---

{
  /* ğŸ”¥ æ ¸å¿ƒä¿®æ”¹ï¼š
  1. not-prose: å½»åº•éš”ç¦»å¤–éƒ¨æ ·å¼
  2. bg-white / dark:bg-[#111]: èƒŒæ™¯æ°¸è¿œæ˜¯å¹²å‡€çš„
  3. border-l-4: ç”¨å·¦ä¾§ç²—è¾¹æ¡†æ¥åŒºåˆ†ç±»å‹
*/
}
<div
  class={`
  not-prose
  my-6 p-4 rounded-r-lg border-surface-border border
  ${current.base}
`}
>
  {/* å›¾æ ‡ */}
  <Icon className={`mt-0.5 h-6 w-6 shrink-0 ${current.icon}`} />

  <div class="w-full min-w-0 space-y-1">
    {/* æ ‡é¢˜ï¼šå¼ºåˆ¶é»‘/ç™½ */}
    {title && <p class="text-base font-bold">{title}</p>}

    {/* æ­£æ–‡å†…å®¹ï¼šä½¿ç”¨ [&_] é€‰æ‹©å™¨é‡ç½®å†…éƒ¨æ ·å¼ï¼Œç¡®ä¿æ¸…æ™° */}
    <div class="text-base font-bold">
      <slot />
    </div>
  </div>
</div>

---
// src/components/mdx/AnimatedEmojiContainer.astro
import clsx from 'clsx';

// é¢„è®¾çš„åŠ¨ç”» Emoji åˆ—è¡¨
const RANDOM_EMOJIS = ['âœ¨', 'ğŸš€', 'ğŸ’¡', 'ğŸ‰', 'ğŸŒŸ', 'ğŸ”¥', 'ğŸ’–', 'ğŸ’¡'];

/**
 * éšæœºè·å–ä¸€ä¸ª Emoji
 * @returns {string} éšæœº Emoji å­—ç¬¦ä¸²
 */
const getRandomEmoji = () => {
  const randomIndex = Math.floor(Math.random() * RANDOM_EMOJIS.length);
  return RANDOM_EMOJIS[randomIndex];
};

const { emoji, size = 'text-4xl', className } = Astro.props;

// 1. å¦‚æœæ²¡æœ‰ä¼ å…¥ emojiï¼Œåˆ™éšæœºé€‰æ‹©
const selectedEmoji = emoji || getRandomEmoji();

// 2. åªæœ‰åœ¨å®¢æˆ·ç«¯è¿è¡Œæ—¶ï¼Œæ‰ä¼šæ‰§è¡Œéšæœºé€‰æ‹©é€»è¾‘ã€‚
//    ä½†ç”±äº getRandomEmoji æ˜¯åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œçš„ï¼Œå› æ­¤éšæœºæ€§åœ¨æ„å»ºæ—¶ç¡®å®šã€‚
//    å¦‚æœéœ€è¦æ¯æ¬¡åŠ è½½éƒ½éšæœºï¼Œåˆ™éœ€è¦ä½¿ç”¨ client:load æŒ‡ä»¤å¹¶æ·»åŠ  JS é€»è¾‘ï¼Œ
//    ä½†é€šå¸¸å¯¹äº MDX è£…é¥°å…ƒç´ ï¼Œæ„å»ºæ—¶ç¡®å®šå³å¯ã€‚
---

<div class={clsx("inline-flex items-center justify-center", className)}>
  <span 
    class={clsx(size, 'emoji-float')} 
    role="img"
    aria-label="Animated emoji decoration"
  >
    {selectedEmoji}
  </span>
</div>

<style>
/* æ ·å¼åªä½œç”¨äºæ­¤ç»„ä»¶ (Scoped CSS) */
/* å®šä¹‰æµ®åŠ¨åŠ¨ç”» */
@keyframes emojiFloat {
  0% {
    transform: translateY(0px) rotate(0deg);
  }
  50% {
    transform: translateY(-5px) rotate(2deg); /* å‘ä¸Šæµ®åŠ¨å¹¶è½»å¾®æ—‹è½¬ */
  }
  100% {
    transform: translateY(0px) rotate(0deg);
  }
}

/* åº”ç”¨åŠ¨ç”» */
.emoji-float {
  display: inline-block;
  animation: emojiFloat 2s ease-in-out infinite; /* 2ç§’ä¸€ä¸ªå‘¨æœŸï¼Œæ— é™å¾ªç¯ */
}
</style>
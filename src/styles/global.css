@import 'tailwindcss';
@plugin '@tailwindcss/typography';

/* =========================================
   1. 定义变量逻辑 (Theme Logic)
   ========================================= */
/* 3. 配置暗色模式：Class 策略 */
/* 这行代码的意思是：当父元素(html)有 .dark 类时，触发 dark: 修饰符 */
/* 这替代了原来的 darkMode: 'class' */
@variant dark (&:where(.dark, .dark *));
/* --- 默认：亮色模式 (Light Mode) --- */
:root {
  font-family: var(--font-sans);
  /* 品牌色 */
  --color-primary: #ac121f;
  --color-primary-dark: #8a0e19;

  /* 核心文字颜色 (随主题变) */
  --color-text-main: #18181b; /* 接近纯黑 */
  --color-text-muted: #71717a; /* 灰色文字 */

  /* 表面背景色 (随主题变：白 -> 黑) */
  --color-surface-base: #ffffff; /* 页面背景：纯白 */
  --color-surface-card: #ffffff; /* 卡片背景：纯白 (通常配合边框) */
  --color-surface-muted: #f4f4f5; /* 浅灰背景 (用于次要区域) */
  --color-surface-hover: #f4f4f5; /* 悬停高亮 */
  --color-surface-border: #e4e4e7; /* 边框：浅灰 */

  /* --- 固定深色 (Fixed Dark) --- */
  /* 用于 Navbar 和 Footer，永远保持深色，不受主题影响 */
  --color-fixed-bg: #050505; /* 永远的深黑背景 */
  --color-fixed-card: #121212; /* 永远的卡片深灰 */
  --color-fixed-text: #ffffff; /* 永远的白色文字 */
  --color-fixed-muted: #a1a1a1; /* 永远的灰色文字 */
  --color-fixed-border: #27272a; /* 永远的深色边框 */
}

/* --- 覆盖：深色模式 (Dark Mode) --- */
/* 当 HTML 标签有 class="dark" 时，覆盖上面的变量 */
.dark {
  /* 核心文字颜色 (反转为白) */
  --color-text-main: #fafafa; /* 接近纯白 */
  --color-text-muted: #a1a1a1; /* 浅灰文字 */

  /* 表面背景色 (变黑) */
  --color-surface-base: #050505; /* 你的深色背景 #050505 */
  --color-surface-card: #121212; /* 你的卡片色 #121212 */
  --color-surface-muted: #18181b; /* 深灰背景 */
  --color-surface-hover: #262626; /* 悬停高亮 */
  --color-surface-border: #27272a; /* 深色边框 */
}

/* =========================================
   2. 注册到 Tailwind (@theme)
   ========================================= */
@theme {
  /* ✅ 将 Montserrat Variable 设为默认 sans 字体 */
  /* 这样整个网站所有的 text-sans 或默认文本都会用它 */
  --font-sans: 'Montserrat Variable', ui-sans-serif, system-ui, sans-serif;
  /* 品牌色 */
  --color-primary: var(--color-primary);
  --color-primary-dark: var(--color-primary-dark);

  /* 自适应颜色 (会自动切换) */
  /* 使用方法: bg-surface-base, text-text-main */
  --color-surface-base: var(--color-surface-base);
  --color-surface-card: var(--color-surface-card);
  --color-surface-muted: var(--color-surface-muted);
  --color-surface-hover: var(--color-surface-hover);
  --color-surface-border: var(--color-surface-border);
  --color-text-main: var(--color-text-main);
  --color-text-muted: var(--color-text-muted);

  /* 固定颜色 (永远深色) */
  /* 使用方法: bg-fixed-bg, text-fixed-text */
  --color-fixed-bg: var(--color-fixed-bg);
  --color-fixed-card: var(--color-fixed-card);
  --color-fixed-text: var(--color-fixed-text);
  --color-fixed-muted: var(--color-fixed-muted);
  --color-fixed-border: var(--color-fixed-border);

  /* 动画定义 */
  --animate-infinite-scroll: infinite-scroll 25s linear infinite;
  @keyframes infinite-scroll {
    from {
      transform: translateX(0);
    }
    to {
      transform: translateX(-100%);
    }
  }
}

/* =========================================
   3. 基础样式 (@layer base)
   ========================================= */
@layer base {
  /* 全局 Body: 应用自适应变量 */
  body {
    background-color: var(--color-surface-base);
    color: var(--color-text-main);
    /* 平滑过渡效果 */
    transition-property:
      color, background-color, border-color, text-decoration-color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
  }

  /* MDX 文章: 自动反色 */
}

/* 1. 定义你的语义化变量 */
@layer base {
  :root {
    /* 亮色模式下的颜色 */
    --color-text-main: #18181b; /* 纯黑 */
    --color-text-muted: #52525b; /* 深灰 */
    --color-primary: #ac121f; /* 品牌红 */
    --color-border: #e4e4e7; /* 浅灰边框 */
    --color-bg-code: #f4f4f5; /* 代码块背景 */
  }

  :root.dark {
    /* 深色模式下的颜色 */
    --color-text-main: #fafafa; /* 纯白 */
    --color-text-muted: #a1a1a1; /* 浅灰 */
    --color-primary: #ef4444; /* 亮红 (深色模式下稍微亮一点) */
    --color-border: #27272a; /* 深灰边框 */
    --color-bg-code: #18181b; /* 代码块背景 */
  }
}
